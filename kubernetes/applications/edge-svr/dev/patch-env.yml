apiVersion: apps/v1
kind: Deployment
metadata:
  name: edge-svr
spec:
  template:
    spec:
      containers:
        - name: edge-svr
          env:
            - name: ROUTE_KEYCLOAK
              value: http://portal-keycloak/realms/Portal
            - name: KEYCLOAK_ISSUER_URI
              value: https://dev.insilicosoft.com/realms/Portal
            - name: JAVA_TOOL_OPTIONS
              value: "-Dlogging.level.root=DEBUG -Djavax.net.ssl.trustStore=/etc/secrets/keystore.jks -Djavax.net.ssl.trustStorePassword=changeit"
          volumeMounts:
            - name: self-signed-certs-volume
              mountPath: /etc/secrets/
              readOnly: true
      volumes:
        - name: self-signed-certs-volume
          secret:
            secretName: self-signed-jks
            items:
              - key: keystore.jks
                path: keystore.jks

